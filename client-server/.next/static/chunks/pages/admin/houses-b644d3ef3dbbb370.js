(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{8829:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/houses",function(){return s(5608)}])},5334:function(e,t,s){"use strict";var l=s(5893),a=s(1664),n=s.n(a);let o=()=>(0,l.jsx)("header",{className:"bg-blue-500 py-4",children:(0,l.jsxs)("nav",{className:"container mx-auto flex items-center justify-between px-4",children:[(0,l.jsx)("h1",{className:"text-white font-bold text-2xl",children:"Housing Prices Tracker"}),(0,l.jsxs)("ul",{className:"flex",children:[(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"text-white hover:text-gray-200 px-3 py-2",href:"/",children:"Home"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"text-white hover:text-gray-200 px-3 py-2",href:"/admin",children:"Admin"})})]})]})});t.Z=o},1465:function(e,t,s){"use strict";var l=s(5893),a=s(1664),n=s.n(a);let o=()=>(0,l.jsx)("nav",{className:" h-full w-64 bg-gray-100",children:(0,l.jsxs)("ul",{className:"list-none p-0 m-0 mt-12",children:[(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white ",href:"/admin/houses",children:"Houses"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white ",href:"/admin/regions",children:"Regions"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white",href:"/admin/cities",children:"Cities"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white",href:"/admin/zillow-estimates",children:"Zillow Estimates"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white",href:"/admin/region-statistics",children:"Region Statistics"})})]})});t.Z=o},5608:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return y},default:function(){return j}});var l=s(5893),a=s(5334),n=s(1465),o=s(6154),r=s(6167);let i=r.f+"/api/Homes";o.Z.interceptors.response.use(e=>e,e=>{throw console.error(e),e});let c=async e=>{let t=await o.Z.post(i,e);return t.data},d=async e=>{let t=await o.Z.get(i+"/".concat(e));return console.log("Request URL:",t.config.url),t.data},x=async e=>{let t=await o.Z.put(i+"/".concat(e.home_id),e);return t.data},m=async e=>{let t=await o.Z.delete(i,{params:{home_id:e}});return t.data};var u={getHomes:d,deleteHome:m,updateHome:x,createHome:c},h=s(7294);let f=e=>{let{setShowCreateHouse:t,currentHouse:s,updateHomes:a,currentCity:n,cities:o}=e,[r,i]=(0,h.useState)(""),[c,d]=(0,h.useState)(""),[x,m]=(0,h.useState)(""),[f,p]=(0,h.useState)(""),[b,g]=(0,h.useState)(""),[y,j]=(0,h.useState)(""),[v,N]=(0,h.useState)(""),[_,w]=(0,h.useState)(""),[S,k]=(0,h.useState)("");(0,h.useEffect)(()=>{console.log("inside use effect"),n&&j(n.city_name),s&&(i(s.street),d(s.zip),m(s.sq_ft.toString()),p(s.num_of_bed.toString()),g(s.num_of_bath.toString()),j(s.city_name),N(s.year_built.toString()),w(s.lat.toString()),k(s.lng.toString()))},[s]);let C=e=>{console.log("inside on set city"),j(e)},H=async()=>{console.log("inside on edit house");try{var e;null===(e=o.find(e=>e.city_name===y))||void 0===e||e.city_id;let l={home_id:null==s?void 0:s.home_id,street:r,sq_ft:parseInt(x),num_of_bed:parseInt(f),num_of_bath:parseInt(b),year_built:parseInt(v),lat:parseInt(_),lng:parseInt(S),zip:c,city_name:y};console.log(l);let n=await u.updateHome(l);console.log(n),t(!1),a()}catch(e){console.log(e)}},I=async()=>{console.log("inside on create house");try{var e;let s=null===(e=o.find(e=>e.city_name===y))||void 0===e?void 0:e.city_id,l={street:r,sq_ft:parseInt(x),num_of_bed:parseInt(f),num_of_bath:parseInt(b),year_built:parseInt(v),lat:parseInt(_),lng:parseInt(S),zip:c,city_id:s,city_name:y},n=await u.createHome(l);console.log("about to add the returned home"),console.log(n),t(!1),a()}catch(e){console.log(e)}};return(0,l.jsxs)("div",{className:"fixed h-screen w-screen flex items-center justify-center ",children:[(0,l.jsxs)("div",{className:"bg-white px-8 py-8 z-10 rounded flex flex-col items-center",children:[s?(0,l.jsx)("h2",{className:"text-xl text-center",children:"Edit House"}):(0,l.jsx)("h2",{className:"text-xl text-center",children:"Add House"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-2 mt-6",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Street"}),(0,l.jsx)("input",{type:"text",name:"street",id:"street",value:r,onChange:e=>i(e.target.value),className:" border rounded-md pl-2 pr-12 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Street"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"City"}),(0,l.jsx)("select",{className:" border rounded-md pl-2 pr-12 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"City",value:y,onChange:e=>C(e.target.value),children:o.map(e=>(0,l.jsx)("option",{value:e.city_name,children:e.city_name},e.city_id))})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"zip",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Zipcode"}),(0,l.jsx)("input",{type:"number",name:"zip",id:"zip",value:c,onChange:e=>d(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Zipcode"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"sq_ft",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Square Feet"}),(0,l.jsx)("input",{type:"number",name:"sq_ft",id:"sq_ft",value:x,onChange:e=>m(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Square Feet"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"num_of_bed",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Number of Beds"}),(0,l.jsx)("input",{type:"number",name:"num_of_bed",id:"num_of_bed",value:f,onChange:e=>p(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Number of Beds"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"num_of_baths",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Number of Baths"}),(0,l.jsx)("input",{type:"number",name:"num_of_bath",id:"num_of_bath",value:b,onChange:e=>g(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Number of Baths"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"year_built",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Year Built"}),(0,l.jsx)("input",{type:"number",name:"year_built",id:"year_built",value:v,onChange:e=>N(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"2023"})]}),(0,l.jsxs)("div",{className:"grid grid grid-cols-2",children:[(0,l.jsxs)("div",{className:"flex flex-col w-32",children:[(0,l.jsx)("label",{htmlFor:"lat",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Latitude"}),(0,l.jsx)("input",{type:"number",name:"lat",id:"lat",value:_,onChange:e=>w(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Latitude"})]}),(0,l.jsxs)("div",{className:"flex flex-col w-32",children:[(0,l.jsx)("label",{htmlFor:"lng",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Longitude"}),(0,l.jsx)("input",{type:"number",name:"lng",id:"lng",value:S,onChange:e=>k(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Longitude"})]})]})]}),s?(0,l.jsx)("button",{className:"rounded px-4 py-2 shadow text-white bg-black mt-8 hover:bg-black active:scale-95 mr-6",onClick:H,children:"Submit"}):(0,l.jsx)("button",{className:"rounded px-4 py-2 shadow text-white bg-black mt-8 hover:bg-black active:scale-95 mr-6",onClick:I,children:"Submit"}),(0,l.jsx)("div",{className:"flex w-full justify-end",children:(0,l.jsx)("button",{className:"text-black mt-8 active:scale-95 hover:text-black hover:underline hover:underline-offset-1 ",onClick:()=>t(!1),children:"Cancel"})})]}),(0,l.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 "})]})},p=e=>{let{setShouldDelete:t,setShowDeleteModal:s}=e,a=()=>{s(!1)},n=()=>{s(!1)};return(0,l.jsxs)("div",{className:"fixed h-screen w-screen flex items-center justify-center ",children:[(0,l.jsxs)("div",{className:"bg-white px-8 py-8 z-20 rounded flex flex-col items-center",children:["Are you sure you want to delete this item ?",(0,l.jsxs)("div",{className:"flex mt-8 justify-end text-right w-full",children:[(0,l.jsx)("button",{className:"px-4 py-2 bg-white text-slate-700 rounded mr-2 hover:text-black hover:underline active:scale-95",onClick:n,children:"Cancel"}),(0,l.jsx)("button",{className:"px-4 py-2 bg-rose-500 text-white rounded hover:bg-black active:scale-95",onClick:a,children:"Delete"})]})]}),(0,l.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 "})]})},b=e=>{let{setShowCreateHouse:t,setCurrentHouse:s,setShowDeleteModal:a,setCurrentCity:n,cities:o,homes:r}=e,[i,c]=(0,h.useState)(r),d=()=>{console.log("on show house"),s(void 0),t(!0)},x=e=>{console.log("inside editHouse"),console.log(e),s(e),t(!0)},m=async e=>{if(e.home_id)try{console.log("inside the on delete yo");let t=await u.deleteHome(e.home_id),s=i.filter(t=>t.home_id!==e.home_id);c(s),console.log(t)}catch(e){console.log(e)}},f=async e=>{let t=o.find(t=>t.city_id===parseInt(e));if(t){n(t);try{let t=await u.getHomes(parseInt(e));c(t)}catch(e){console.log(e),c([])}}};return(0,l.jsx)("div",{children:(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:" mx-auto py-12",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsxs)("div",{className:"flex mb-6",children:[(0,l.jsx)("label",{className:"mr-3 content-center text-lg",children:"Select City"}),(0,l.jsx)("select",{className:"border px-4 bg-white text-lg",onChange:e=>f(e.target.value),children:o.map(e=>(0,l.jsx)("option",{value:e.city_id,children:e.city_name},e.city_id))})]}),(0,l.jsxs)("div",{className:"shadow bg-white px-8 py-8 rounded text-center",children:[(0,l.jsxs)("table",{className:"table-auto ",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2",children:"ID"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Street"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Sq Ft"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"# of Beds"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"# of Baths"})]})}),(0,l.jsx)("tbody",{children:i.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"border px-4 py-2",children:e.home_id}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.street}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.sq_ft}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.num_of_bed}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.num_of_bath}),(0,l.jsx)("td",{className:"px-4 py-2 ",children:(0,l.jsx)("button",{className:"hover:underline hover:underline-offset-1",onClick:()=>x(e),children:"Edit"})}),(0,l.jsx)("td",{className:"px-4 py-2",children:(0,l.jsx)("button",{className:"hover:underline hover:underline-offset-1",onClick:()=>m(e),children:"Delete"})})]},e.home_id))})]}),(0,l.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4",onClick:()=>d(),children:"Add House"})]})]})})})})},g=e=>{let{cities:t,input_homes:s}=e;console.log("re-rendering page");let[o,r]=(0,h.useState)(s),[i,c]=(0,h.useState)(!1),[d,x]=(0,h.useState)(void 0),[m,g]=(0,h.useState)(void 0),[y,j]=(0,h.useState)(!1),[v,N]=(0,h.useState)(!1),[_,w]=(0,h.useState)(""),S=async()=>{if(m){console.log("inside call back function updating homes");let e=await u.getHomes(m.city_id);console.log(e),r(e)}else{let e=await u.getHomes(t[0].city_id);console.log(e),r(e)}};return(0,l.jsxs)("div",{className:"bg-gray-50 h-screen",children:[(0,l.jsx)(a.Z,{}),(0,l.jsxs)("div",{className:"flex flex-row h-screen ",children:[(0,l.jsx)(n.Z,{}),(0,l.jsxs)("div",{className:"flex flex-col justify-start w-full bg-gray-50 mt-4",children:[0===t.length&&0===o.length&&(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center w-full",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"No cities or homes found"}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Please add a city and a home"})]}),(0,l.jsx)(b,{setShowCreateHouse:c,setCurrentHouse:x,setShowDeleteModal:j,setCurrentCity:g,cities:t,homes:o})]}),i&&(0,l.jsx)(f,{setShowCreateHouse:c,updateHomes:S,currentHouse:d,currentCity:m,cities:t}),y&&(0,l.jsx)(p,{setShowDeleteModal:j,setShouldDelete:N})]})]})};var y=!0,j=g},6167:function(e,t,s){"use strict";s.d(t,{f:function(){return l}});let l="http://flip1.engr.oregonstate.edu:9178"}},function(e){e.O(0,[664,154,774,888,179],function(){return e(e.s=8829)}),_N_E=e.O()}]);