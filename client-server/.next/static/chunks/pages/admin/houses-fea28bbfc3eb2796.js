(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{8829:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/houses",function(){return s(5608)}])},5334:function(e,t,s){"use strict";var l=s(5893),a=s(1664),n=s.n(a);let r=()=>(0,l.jsx)("header",{className:"bg-blue-500 py-4",children:(0,l.jsxs)("nav",{className:"container mx-auto flex items-center justify-between px-4",children:[(0,l.jsx)("h1",{className:"text-white font-bold text-2xl",children:"Housing Prices Tracker"}),(0,l.jsxs)("ul",{className:"flex",children:[(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"text-white hover:text-gray-200 px-3 py-2",href:"/",children:"Home"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"text-white hover:text-gray-200 px-3 py-2",href:"/admin",children:"Admin"})})]})]})});t.Z=r},1465:function(e,t,s){"use strict";var l=s(5893),a=s(1664),n=s.n(a);let r=()=>(0,l.jsx)("nav",{className:" h-full w-64 bg-gray-100",children:(0,l.jsxs)("ul",{className:"list-none p-0 m-0 mt-12",children:[(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white ",href:"/admin/houses",children:"Houses"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white ",href:"/admin/regions",children:"Regions"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white",href:"/admin/cities",children:"Cities"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white",href:"/admin/states",children:"States"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white",href:"/admin/zillow-estimates",children:"Zillow Estimates"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{className:"block text-black py-3 px-6 hover:bg-gray-700 hover:text-white",href:"/admin/region-statistics",children:"Region Statistics"})})]})});t.Z=r},5608:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return j},default:function(){return v}});var l=s(5893),a=s(5334),n=s(1465),r=s(6154),i=s(6167);let o=i.f+"/api/Homes";r.Z.interceptors.response.use(e=>e,e=>{throw console.error(e),e});let c=async e=>{let t=await r.Z.post(o,e);return t.data},d=async()=>{let e=await r.Z.get(o);return console.log("Request URL:",e.config.url),e.data},x=async e=>{let t=await r.Z.get(o+"/".concat(e));return console.log("Request URL:",t.config.url),t.data},m=async e=>{let t=await r.Z.put(o+"/".concat(e.home_id),e);return t.data},u=async e=>{let t=await r.Z.delete(o,{params:{home_id:e}});return t.data};var h={getHomes:x,deleteHome:u,updateHome:m,createHome:c,getAllHomes:d},f=s(7294);let p=e=>{let{setShowCreateHouse:t,currentHouse:s,updateHomes:a,currentCity:n,cities:r}=e,[i,o]=(0,f.useState)(""),[c,d]=(0,f.useState)(""),[x,m]=(0,f.useState)(""),[u,p]=(0,f.useState)(""),[b,g]=(0,f.useState)(""),[y,j]=(0,f.useState)(""),[v,N]=(0,f.useState)(""),[_,w]=(0,f.useState)(""),[S,k]=(0,f.useState)("");(0,f.useEffect)(()=>{console.log("inside use effect"),n&&j(n.city_name),s&&(o(s.street),d(s.zip),m(s.sq_ft.toString()),p(s.num_of_bed.toString()),g(s.num_of_bath.toString()),j(s.city_name),N(s.year_built.toString()),w(s.lat.toString()),k(s.lng.toString()))},[s]);let C=e=>{console.log("inside on set city"),j(e)},H=async()=>{console.log("inside on edit house");try{var e;null===(e=r.find(e=>e.city_name===y))||void 0===e||e.city_id;let l={home_id:null==s?void 0:s.home_id,street:i,sq_ft:parseInt(x),num_of_bed:parseInt(u),num_of_bath:parseInt(b),year_built:parseInt(v),lat:parseInt(_),lng:parseInt(S),zip:c,city_name:y};await h.updateHome(l),a(),t(!1)}catch(e){console.log(e)}},I=async()=>{console.log("inside on create house");try{var e;let s=null===(e=r.find(e=>e.city_name===y))||void 0===e?void 0:e.city_id,l={street:i,sq_ft:parseInt(x),num_of_bed:parseInt(u),num_of_bath:parseInt(b),year_built:parseInt(v),lat:parseInt(_),lng:parseInt(S),zip:c,city_id:s,city_name:y};await h.createHome(l),a(),t(!1)}catch(e){console.log(e)}};return(0,l.jsxs)("div",{className:"fixed h-screen w-screen flex items-center justify-center ",children:[(0,l.jsxs)("div",{className:"bg-white px-8 py-8 z-10 rounded flex flex-col items-center",children:[s?(0,l.jsx)("h2",{className:"text-xl text-center",children:"Edit House"}):(0,l.jsx)("h2",{className:"text-xl text-center",children:"Add House"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-2 mt-6",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Street"}),(0,l.jsx)("input",{type:"text",name:"street",id:"street",value:i,onChange:e=>o(e.target.value),className:" border rounded-md pl-2 pr-12 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Street"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"City"}),(0,l.jsx)("select",{className:" border rounded-md pl-2 pr-12 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"City",value:y,onChange:e=>C(e.target.value),children:r.map(e=>(0,l.jsx)("option",{value:e.city_name,children:e.city_name},e.city_id))})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"zip",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Zipcode"}),(0,l.jsx)("input",{type:"number",name:"zip",id:"zip",value:c,onChange:e=>d(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Zipcode"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"sq_ft",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Square Feet"}),(0,l.jsx)("input",{type:"number",name:"sq_ft",id:"sq_ft",value:x,onChange:e=>m(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Square Feet"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"num_of_bed",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Number of Beds"}),(0,l.jsx)("input",{type:"number",name:"num_of_bed",id:"num_of_bed",value:u,onChange:e=>p(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Number of Beds"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"num_of_baths",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Number of Baths"}),(0,l.jsx)("input",{type:"number",name:"num_of_bath",id:"num_of_bath",value:b,onChange:e=>g(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Number of Baths"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"year_built",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Year Built"}),(0,l.jsx)("input",{type:"number",name:"year_built",id:"year_built",value:v,onChange:e=>N(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"2023"})]}),(0,l.jsxs)("div",{className:"grid grid grid-cols-2",children:[(0,l.jsxs)("div",{className:"flex flex-col w-32",children:[(0,l.jsx)("label",{htmlFor:"lat",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Latitude"}),(0,l.jsx)("input",{type:"number",name:"lat",id:"lat",value:_,onChange:e=>w(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Latitude"})]}),(0,l.jsxs)("div",{className:"flex flex-col w-32",children:[(0,l.jsx)("label",{htmlFor:"lng",className:"block text-sm font-medium text-gray-700 text-left pl-2",children:"Longitude"}),(0,l.jsx)("input",{type:"number",name:"lng",id:"lng",value:S,onChange:e=>k(e.target.value.toString()),className:" border rounded-md pl-2 py-2 mt-2 focus:outline-none focus:border-indigo-500 focus:border-2 sm:text-sm text-left",placeholder:"Longitude"})]})]})]}),s?(0,l.jsx)("button",{className:"rounded px-4 py-2 shadow text-white bg-black mt-8 hover:bg-black active:scale-95 mr-6",onClick:H,children:"Submit"}):(0,l.jsx)("button",{className:"rounded px-4 py-2 shadow text-white bg-black mt-8 hover:bg-black active:scale-95 mr-6",onClick:I,children:"Submit"}),(0,l.jsx)("div",{className:"flex w-full justify-end",children:(0,l.jsx)("button",{className:"text-black mt-8 active:scale-95 hover:text-black hover:underline hover:underline-offset-1 ",onClick:()=>t(!1),children:"Cancel"})})]}),(0,l.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 "})]})},b=e=>{let{setShouldDelete:t,setShowDeleteModal:s}=e,a=()=>{s(!1)},n=()=>{s(!1)};return(0,l.jsxs)("div",{className:"fixed h-screen w-screen flex items-center justify-center ",children:[(0,l.jsxs)("div",{className:"bg-white px-8 py-8 z-20 rounded flex flex-col items-center",children:["Are you sure you want to delete this item ?",(0,l.jsxs)("div",{className:"flex mt-8 justify-end text-right w-full",children:[(0,l.jsx)("button",{className:"px-4 py-2 bg-white text-slate-700 rounded mr-2 hover:text-black hover:underline active:scale-95",onClick:n,children:"Cancel"}),(0,l.jsx)("button",{className:"px-4 py-2 bg-rose-500 text-white rounded hover:bg-black active:scale-95",onClick:a,children:"Delete"})]})]}),(0,l.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 "})]})},g=e=>{let{setShowCreateHouse:t,setCurrentHouse:s,updateHomes:a,cities:n,homes:r}=e,i=()=>{console.log("on show house"),s(void 0),t(!0)},o=e=>{console.log("inside editHouse"),console.log(e),s(e),t(!0)},c=async e=>{if(e.home_id)try{console.log("inside the on delete yo"),await h.deleteHome(e.home_id),a()}catch(e){console.log(e)}};return(0,l.jsx)("div",{children:(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:" mx-auto py-12",children:(0,l.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,l.jsxs)("div",{className:"shadow bg-white px-8 py-8 rounded text-center",children:[(0,l.jsxs)("table",{className:"table-auto ",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2",children:"ID"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Street"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Sq Ft"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"# of Beds"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"# of Baths"})]})}),(0,l.jsx)("tbody",{children:r.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"border px-4 py-2",children:e.home_id}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.street}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.sq_ft}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.num_of_bed}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.num_of_bath}),(0,l.jsx)("td",{className:"px-4 py-2 ",children:(0,l.jsx)("button",{className:"hover:underline hover:underline-offset-1",onClick:()=>o(e),children:"Edit"})}),(0,l.jsx)("td",{className:"px-4 py-2",children:(0,l.jsx)("button",{className:"hover:underline hover:underline-offset-1",onClick:()=>c(e),children:"Delete"})})]},e.home_id))})]}),(0,l.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4",onClick:()=>i(),children:"Add House"})]})})})})})},y=e=>{let{cities:t,input_homes:s}=e;console.log("re-rendering page");let[r,i]=(0,f.useState)(s),[o,c]=(0,f.useState)(!1),[d,x]=(0,f.useState)(void 0),[m,u]=(0,f.useState)(t[0]),[y,j]=(0,f.useState)(!1),[v,N]=(0,f.useState)(!1),[_,w]=(0,f.useState)("");(0,f.useEffect)(()=>{console.log("inside the use Effect"),S()},[m]);let S=async()=>{console.log("inside call back function updating homes");let e=await h.getHomes(m.city_id);i(e)},k=async e=>{let s=t.find(t=>t.city_id===parseInt(e));u(s)};return(0,l.jsxs)("div",{className:"bg-gray-50 h-screen",children:[(0,l.jsx)(a.Z,{}),(0,l.jsxs)("div",{className:"flex flex-row h-screen ",children:[(0,l.jsx)(n.Z,{}),(0,l.jsxs)("div",{className:"flex flex-col justify-start w-full bg-gray-50 mt-4",children:[(0,l.jsxs)("div",{className:"flex mb-6",children:[(0,l.jsx)("label",{className:"mr-3 content-center text-lg",children:"Select City"}),(0,l.jsx)("select",{className:"border px-4 bg-white text-lg",onChange:e=>k(e.target.value),children:t.map(e=>(0,l.jsx)("option",{value:e.city_id,children:e.city_name},e.city_id))})]}),0===t.length&&0===r.length&&(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center w-full",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"No cities or homes found"}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Please add a city and a home"})]}),(0,l.jsx)(g,{setShowCreateHouse:c,setCurrentHouse:x,setShowDeleteModal:j,setCurrentCity:u,cities:t,updateHomes:S,homes:r})]}),o&&(0,l.jsx)(p,{setShowCreateHouse:c,updateHomes:S,currentHouse:d,currentCity:m,cities:t}),y&&(0,l.jsx)(b,{setShowDeleteModal:j,setShouldDelete:N})]})]})};var j=!0,v=y},6167:function(e,t,s){"use strict";s.d(t,{f:function(){return l}});let l="http://flip1.engr.oregonstate.edu:9178"}},function(e){e.O(0,[664,154,774,888,179],function(){return e(e.s=8829)}),_N_E=e.O()}]);